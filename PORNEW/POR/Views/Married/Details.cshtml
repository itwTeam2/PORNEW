@using POR.Models
@model IEnumerable<POR.Models.Married._CivilStatus>
<link href="~/Content/CustomeStyle.css" rel="stylesheet" />
@{
    ViewBag.Title = "Details";
}
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    //Marriage Details
     
    <div class="content-wrapper" style="height:900px !important;">
        
        <section class="content-header">
            <h1>
                Marriage/Divorce/Widow
                <small>View Added Details</small>
            </h1>

            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                <li class="active">Marriage/Divorce/Widow</li>
            </ol>

            <div id="ErrorMessage">
                @if (TempData["ScfMsg"] != null)
                {
                    <div id="Msg" class="col-lg-12  alert alert-success">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        <strong>Alert! </strong> @TempData["ScfMsg"]
                    </div>
                }
                else if (TempData["ErrMsg"] != null)
                {
                    <div id="Msg" class="col-lg-12 alert alert-danger">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        <strong>Alert! </strong>@TempData["ErrMsg"]
                    </div>

                }

            </div>
        
        </section>
        
        <br />      

        <section class="col-lg-12 nav-tabs-custom connectedSortable">
           

            @foreach (var item in Model)
            {
                string CivilStatusCode = TempData["CivilStatusCode"].ToString();
                int RejectStatus = Convert.ToInt32(TempData["Rejectstatus"]);
                if (RejectStatus != 2)
                {
                    <div class="col-lg-6">
                        <br />
                        <dl class="dl-horizontal">
                            @* Service No : *@
                            <dt class="form-group">
                                Service No :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.ServiceNo)

                            </dd>

                            @* Name *@
                            <dt class="form-group">
                                Rank :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Rank)

                            </dd>

                            @* Name : *@
                            <dt class="form-group">
                                Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Name)

                            </dd>

                            @* Location : *@
                            <dt class="form-group">
                                Location :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Location)

                            </dd>

                            @* Refference No : *@
                            <dt class="form-group">
                                Refference No :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.RefNo)

                            </dd>

                            @* Category Name : *@
                            <dt class="form-group">
                                Category Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.CategoryName)

                            </dd>

                            @*Spouse Name :*@
                            <dt class="form-group">
                                Spouse Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.SpouseName)

                            </dd>

                            @* Authority :*@
                            <dt class="form-group">
                                Authority :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Authority)

                            </dd>

                            @if (item.PreviousReject == 1)
	                        {
		                        @* Reject Ref :*@
                                <dt class="alert alert-danger">
                                    Reject Ref No :
                                </dt>

                                <dd class="alert alert-danger">
                                    @Html.DisplayFor(model => item.RejectAuth)

                                </dd>
                            }

                            @switch (CivilStatusCode)
                            {
                            case "AJ-1":
                                    
                                    //Marriage Date :
                                    <dt class="form-group">
                                        Marriage Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.MarriageDate, "{0:dd/MM/yyyy}")

                                    </dd>

                                    //Registar Office Location :
                                    <dt class="form-group" style="white-space:unset">
                                        Registar Office Location :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.RegistarOfficeLocation)

                                    </dd>

                                    //Marriage Certificate No:
                                    <dt class="form-group" style="white-space:unset">
                                        Marriage Certificate No :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.MarriageCertificateNo)

                                    </dd>

                                    //Marriage Witheffect Date:
                                    <dt class="form-group" style="white-space:unset">
                                        Marriage With Effect Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.WEFDate)

                                    </dd>
                                    break;
                                case "AJ-2":
                                case "AJ-4":
                                    //Divorce Date :
                                    <dt class="form-group">
                                        Divorce/Null Void Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceDate, "{0:dd/MM/yyyy}")

                                    </dd>

                                    //Divorce Place :
                                    <dt class="form-group">
                                        Divorce/Null Void Place/Location :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceLocation)

                                    </dd>

                                    //Court Case No:
                                    <dt class="form-group">
                                        Court Case No :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.CourtCaseNo)

                                    </dd>

                                    //Date Of Case:
                                    <dt class="form-group">
                                        Date Of Case :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceCaseDate, "{0:dd/MM/yyyy}")

                                    </dd>
                                    break;
                                case "AJ-3":
                                    //Death Certificate No Of Spouse
                                    <dt class="form-group" style="white-space:unset">
                                        Death Certificate No Of Spouse :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DeathCertificateNo)

                                    </dd>
                                    //Date of Decease
                                    <dt class="form-group" style="white-space:unset">
                                        Date of Decease :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DateofDecease, "{0:dd/MM/yyyy}")

                                    </dd>
                                    break;
                                default:
                                    break;
                            }
                        </dl>
                    </div>

                    <div class="col-lg-6">
                        <br />
                        <dl class="dl-horizontal">
                            @*NOKName*@
                            <dt class="form-group">
                                NOK Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKName)

                            </dd>
                            @*NOKChangeTo*@
                            <dt class="form-group">
                                NOK Change To :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKChangeTo)

                            </dd>

                            @*NOKaddress*@
                            <dt class="form-group">
                                NOK Address :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKaddress)

                            </dd>

                            @*NOKWDate*@
                            <dt class="form-group">
                                With Effect Date :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKWDate)

                            </dd>

                            @*District1*@
                            <dt class="form-group">
                                District :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.District1)

                            </dd>

                            @*GSnumber*@
                            <dt class="form-group">
                                GS Division :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.GSnumber)

                            </dd>

                            @*NearestTown*@
                            <dt class="form-group">
                                Nearest Town :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NearestTown)

                            </dd>

                            @*PoliceStation1*@
                            <dt class="form-group">
                                Police Station :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.PoliceStation1)

                            </dd>

                            @*Post Office*@
                            <dt class="form-group">
                                Post Office :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.PostOfficeName)

                            </dd>

                            @*Remarks*@
                            <dt class="form-group">
                                Remarks :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Remarks)

                            </dd>

                        </dl>
                    </div>

                }
                else
                {
                    <div class="col-lg-6">
                        <br />
                        <dl class="dl-horizontal">
                            @*Service No : *@
                            <dt class="form-group">
                                Service No :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.ServiceNo)

                            </dd>

                            @*Name*@
                            <dt class="form-group">
                                Rank :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Rank)

                            </dd>

                            @*Name :*@
                            <dt class="form-group">
                                Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Name)

                            </dd>

                            @*Location :*@
                            <dt class="form-group">
                                Location :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Location)

                            </dd>

                            @*Refference No :*@
                            <dt class="form-group">
                                Refference No :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.RefNo)

                            </dd>

                            @*Category Name :*@
                            <dt class="form-group">
                                Category Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.CategoryName)

                            </dd>

                            @*Spouse Name :*@
                            <dt class="form-group">
                                Spouse Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.SpouseName)

                            </dd>

                            @*Authority :*@
                            <dt class="form-group">
                                Authority :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Authority)

                            </dd>

                            @*Reject Reason Comment :*@
                            <dt class="alert-danger">
                                Reject Reason:
                            </dt>

                            <dd  class="alert-danger">
                                @Html.DisplayFor(model => item.Comment)
                            </dd>
                            
                            @*Reject Reason Person :*@
                            <dt class="form-group alert-warning">
                                Reject Person:
                            </dt>

                            <dd class="alert-warning">
                                @Html.DisplayFor(model => item.RejectRoleName)
                            </dd>

                            @switch (CivilStatusCode)
                            {
                                case "AJ-1":

                                    //Marriage Date :
                                    <dt class="form-group">
                                        Marriage Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.MarriageDate, "{0:dd/MM/yyyy}")

                                    </dd>

                                    //Registar Office Location :
                                    <dt class="form-group" style="white-space:unset">
                                        Registar Office Location :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.RegistarOfficeLocation)

                                    </dd>

                                    //Marriage Certificate No:
                                    <dt class="form-group" style="white-space:unset">
                                        Marriage Certificate No :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.MarriageCertificateNo)

                                    </dd>

                                    //Marriage Witheffect Date:
                                    <dt class="form-group" style="white-space:unset">
                                        Marriage With Effect Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.WEFDate)

                                    </dd>
                                    break;
                                case "AJ-2":
                                    //Divorce Date :
                                    <dt class="form-group">
                                        Divorce Date :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceDate, "{0:dd/MM/yyyy}")

                                    </dd>

                                    //Divorce Place :
                                    <dt class="form-group">
                                        Divorce Place :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceLocation)

                                    </dd>

                                    //Court Case No:
                                    <dt class="form-group">
                                        Court Case No :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.CourtCaseNo)

                                    </dd>

                                    //Date Of Case:
                                    <dt class="form-group">
                                        Date Of Case :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DivorceCaseDate, "{0:dd/MM/yyyy}")

                                    </dd>
                                    break;
                                case "AJ-3":
                                    //Death Certificate No Of Spouse
                                    <dt class="form-group" style="white-space:unset">
                                        Death Certificate No Of Spouse :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DeathCertificateNo)

                                    </dd>

                                    //Date of Decease
                                    <dt class="form-group" style="white-space:unset">
                                        Date of Decease :
                                    </dt>

                                    <dd>
                                        @Html.DisplayFor(model => item.DateofDecease, "{0:dd/MM/yyyy}")

                                    </dd>
                                    break;
                                default:
                                    break;
                            }
                        </dl>
                    </div>

                    <div class="col-lg-6">
                        <br />
                        <dl class="dl-horizontal">
                            @*NOKName*@
                            <dt class="form-group">
                                NOK Name :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKName)

                            </dd>

                            @*NOKChangeTo*@
                            <dt class="form-group">
                                NOK Change To :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKChangeTo)

                            </dd>

                            @*NOKaddress*@
                            <dt class="form-group">
                                NOK Address :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKaddress)

                            </dd>

                            @*NOKWDate*@
                            <dt class="form-group">
                                With Effect Date :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NOKWDate)

                            </dd>

                            @*District1*@
                            <dt class="form-group">
                                District :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.District1)

                            </dd>

                            @*GSnumber*@
                            <dt class="form-group">
                                GS Division :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.GSnumber)

                            </dd>

                            @*NearestTown*@
                            <dt class="form-group">
                                Nearest Town :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.NearestTown)

                            </dd>

                            @*PoliceStation1*@
                            <dt class="form-group">
                                Police Station :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.PoliceStation1)

                            </dd>

                            @*Post Office*@
                            <dt class="form-group">
                                Post Office :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.PostOfficeName)

                            </dd>

                            @*Remarks*@
                            <dt class="form-group">
                                Remarks :
                            </dt>

                            <dd>
                                @Html.DisplayFor(model => item.Remarks)

                            </dd>

                        </dl>
                    </div>
                }

                @*Fixed Details Id popup Box value*@
                <input type="hidden" id="hndCSHID" value="@Html.DisplayFor(model => item.CSHID)" />
                <input type="hidden" id="hndFMSID" value="@Html.DisplayFor(model => item.FMSID)" />
            }
            
        </section>
        <section>

            @{
                int? URID = Convert.ToInt32(TempData["UserRoleId"]);
                int? CurrentStatus = Convert.ToInt32(TempData["CurrentStatus"]);
                int? SubmitStatus = Convert.ToInt32(TempData["SubmitStatus"]);
                int Reject = Convert.ToInt32(TempData["Rejectstatus"]);

                foreach (var item in Model)
                {
                    if (item.RSID == (int)POR.Enum.RecordStatus.Insert)
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Forward", "Forward", "Married", new { id = item.CSHID }, new { @class = "btn btn-primary", id = "btnCertify" })
                            @if (Reject == 2)
                            {
                               @Html.ActionLink("Edit", "Edit", "Married", new { id = item.CSHID, rejectStatus = 2 }, new { @class = "btn btn-warning" })
                            }
                            else
                            {
                                @Html.ActionLink("Edit", "Edit", "Married", new { id = item.CSHID, rejectStatus = 1 }, new { @class = "btn btn-warning" })
                            }
                            @Html.ActionLink("Delete", "Delete", "Married", new { id = item.CSHID }, new { @class = "btn btn-danger" })
                            @*<input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />*@
                            @Html.ActionLink("Back to List", "IndexCivilStatus", "Married",  new { @class = "btn btn-info" })
                        </div>
                    }
                    else if (item.RSID == (int)POR.Enum.RecordStatus.Forward && (URID == CurrentStatus || CurrentStatus == 0))
                    {
                        if (CurrentStatus == (int)POR.Enum.UserRole.ACCOUNTS01)
                        {
                            <div class="col-lg-12">
                                @Html.ActionLink("Certify to ED", "Forward", "Married", new { id = item.CSHID, Sno = item.Snumber, CSHID = item.CSHID }, new { @class = "btn btn-success", id = "btnCertify" })
                                <input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />
                                @Html.ActionLink("Back to List", "IndexCivilStatus", "Married", new { @class = "btn btn-info" })
                            </div>
                        }
                        else
                        {
                            <div class="col-lg-12">
                                @Html.ActionLink("Forward", "Forward", "Married", new { id = item.CSHID }, new { @class = "btn btn-primary", id = "btnCertify" })
                                <input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />
                                @Html.ActionLink("Back to List", "IndexCivilStatus", "Married", new { @class = "btn btn-info" })

                            </div>
                        }
                    }
                    else if (item.RSID == (int)POR.Enum.RecordStatus.Forward && (URID == CurrentStatus && CurrentStatus != 1))
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Forward", "Forward", "Married", new { id = item.CSHID }, new { @class = "btn btn-primary", id = "btnCertify" })
                            <input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />
                            @Html.ActionLink("Back to List", "IndexCivilStatus", "Married", new { @class = "btn btn-info" })
                        </div>
                    }
                    else if (item.RSID == (int)POR.Enum.RecordStatus.Reject && URID == CurrentStatus && CurrentStatus == (int)POR.Enum.UserRole.P3CLERK)
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Reject Confirm", "RejectConfirm", "Married", new { id = item.CSHID }, new { @class = "btn btn-danger"})
                            @Html.ActionLink("Edit", "Edit", "Married", new { id = item.CSHID, rejectStatus = 2 }, new { @class = "btn btn-warning" })
                            @Html.ActionLink("Back to List", "RejectIndex", "Married", new { @class = "btn btn-info" })
                        </div>
                    }
                    else if (item.RSID == (int)POR.Enum.RecordStatus.Reject && URID == CurrentStatus && CurrentStatus != (int)POR.Enum.UserRole.AccountsClerk)
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Forward", "Forward", "Married", new { id = item.CSHID }, new { @class = "btn btn-primary" , id = "btnCertify" })
                            <input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />
                            @Html.ActionLink("Back to List", "RejectIndex", "Married", new { @class = "btn btn-info" })
                        </div>
                    }
                    else if (item.RSID == (int)POR.Enum.RecordStatus.Reject && URID == (int)POR.Enum.UserRole.P3SNCO && CurrentStatus != (int)POR.Enum.UserRole.AccountsClerk)
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Forward", "Forward", "Married", new { id = item.CSHID }, new { @class = "btn btn-primary", id = "btnCertify" })
                            <input id="btnReject" type="button" value="Reject" data-assigned-id="1000" data-toggle="modal" data-target="#exampleModalLong" class="btn btn-danger" />
                            @Html.ActionLink("Back to List", "RejectIndex", "Married", new { @class = "btn btn-info" })
                        </div>
                    }
                    else
                    {
                        <div class="col-lg-12">
                            @Html.ActionLink("Back to List", "IndexCivilStatus", "Married", new { @class = "btn btn-info" })
                        </div>
                    }

                    @*Fixed Details Id popup Box value*@
                    @*<input type="hidden" id="hndFADID" value="@Html.DisplayFor(model => model.CSHID)" />
                    <input type="hidden" id="hndFMSID" value="@Html.DisplayFor(model => model.FMSID)" />*@

                    }
                }
        </section>
        
        <div class="loading" id="dvloader">
            <img class="loading-image" src="~/Content/img/Spinner-3.gif" alt="Loading..." />
        </div>

    </div>

}
<script src="~/Scripts/Jq.js"></script>
<script src="~/Scripts/Marriage.js"></script>
<link href="~/Content/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/jquery.min.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>

<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-hidden="true">
    
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom:none !important;">
                Reject Comments
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <hr style="margin-top: 0px !important; margin-bottom: 0px !important; padding-bottom: 0px !important; padding-top: 0px !important; " />
            </div>
            <div class="modal-body" id="partial2">
                @{                   
                    <div>
                        @Html.Partial("_RejectCommentCiviStatus")
                    </div>
                }
                
            </div>
        </div>
    </div>

</div>

<script type="text/javascript">
    $(function () {
        $('#btnReject').click(function () {            
            var CSHID = $("#hndCSHID").val();
            var FMSID = $("#hndFMSID").val();
            
            var route = '@Url.Action("Reject", "Married")?CSHID=' + CSHID + '&FMSID=' + FMSID;

            //$('#partial2').load(route);
        });
    });
</script>
